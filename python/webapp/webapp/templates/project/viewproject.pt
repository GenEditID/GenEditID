<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n">

<div metal:use-macro="load: ../layout.pt">
    <div metal:fill-slot="content">

      <h1>${title}</h1>
      <h2>${subtitle}</h2>
      <hr />
      <p>
          <a href="${request.route_url('home')}">Back to projects list</a>
          | <a href="${request.route_url('project_edit', projectid=project.id)}">Edit project ${project.geid}</a>
      </p>
      <hr />

      <!-- Overview section ************************************************ -->
      <h3>Overview</h3>

      <h4>project details</h4>
      <table id="projecttable">
          <thead>
              <th tal:repeat="header project_headers">${header}</th>
          </thead>
          <tr tal:repeat="row project_rows">
              <td tal:repeat="cell row">${cell}</td>
          </tr>
      </table>

      <h4>targets</h4>
      <table id="targettable">
          <thead>
              <th tal:repeat="header target_headers">${header}</th>
          </thead>
          <tr tal:repeat="row target_rows">
              <td tal:repeat="cell row">${cell}</td>
          </tr>
      </table>

      <h4>guides</h4>
      <table id="guidetable">
          <thead>
              <th tal:repeat="header guide_headers">${header}</th>
          </thead>
          <tr tal:repeat="row guide_rows">
              <td tal:repeat="cell row">${cell}</td>
          </tr>
      </table>

      <h4>guide mismatches</h4>
      <table id="guidemismatchtable">
          <thead>
              <th tal:repeat="header guide_mismatch_headers">${header}</th>
          </thead>
          <tr tal:repeat="row guide_mismatch_rows">
              <td tal:repeat="cell row">${cell}</td>
          </tr>
      </table>

      <!-- h4>plate layouts</h4 -->
      <hr/>

      <!-- Results section ************************************************* -->
      <h3>Results</h3>
      <div tal:condition="cellgrowthplot">
          <h4>Cell Growth</h4>
          <div id="cellgrowth" class="cellgrowth">
              ${structure: cellgrowthplot}
          </div>
      </div>

      <div tal:condition="proteinabundanceplot">
          <h4>Protein Abundance</h4>
          <div id="proteinabundance" class="proteinabundance">
              ${structure: proteinabundanceplot}
          </div>
      </div>

      <div tal:condition="zygosityplot">
        <h4>Zygosity</h4>
          <div id="zygosityplot" class="zygosityplot">
            ${structure: zygosityplot}
          </div>
      </div>

      <div tal:condition="variantsindelsplot">
        <h4>Variants</h4>
          <div id="variantsindelsplot" class="variantsindelsplot">
            ${structure: variantsindelsplot}
          </div>
      </div>

      <div tal:condition="variantssnvsplot">
        <h4>Variants</h4>
          <div id="variantssnvsplot" class="variantssnvsplot">
            ${structure: variantssnvsplot}
          </div>
      </div>
      <hr />

      <!-- Sample analysis section ***************************************** -->
      <h3>Sample analysis</h3>
      <h4>score on plates</h4>

      <h4>data table</h4>
      <table id="sampledatatable">
          <thead>
              <th tal:repeat="header sample_data_table_headers">${header}</th>
          </thead>
          <tr tal:repeat="row sample_data_table_rows">
              <td tal:repeat="cell row">${cell}</td>
          </tr>
      </table>

      <hr />
      <p>
          <a href="${request.route_url('home')}">Back to projects list</a>
      </p>
      <hr />

    </div>
</div>
<script>
$(document).ready(
    function()
    {
        $('#projecttable').DataTable(
        {
          searching: false,
          paging:    false,
          ordering:  false,
          info:      false,
        });
        $('#targettable').DataTable(
        {
        });
        $('#guidetable').DataTable(
        {
        });
        $('#guidemismatchtable').DataTable(
        {
        });
        $('#sampledatatable').DataTable(
        {
        });
    }
);
</script>
